# Meme Generator

Welcome to the Meme Generator project, this is a Python project which allows the creation of a meme using three approaches. 
Firstly a meme can be randomly generated via a web interface, secondly a meme can be generated using a web interface via providing a quote, author and URL to an image. Finally, via a CLI where a path, quote and author can be provided to generate an image.

This project consists of two primary modules which are outlined below, `QuoteEngine` and `MemeGenerator`. It also includes a `_data` folder which contains quotes within a variety of document formats (csv, doc, pdf and txt), photos and another folder which contains sample documents for highlighting document structure. Besides this, there is a templates folder for serving HTML and there are two python files, `app.py` and `meme.py` which serve as entry points for the app.

## QuoteEngine Module
The purpose of the QuoteEngine module is to generate a quote using an ingestor via a complex strategy pattern.
This module depends on a few packages such as: 
```
pandas -- Used to parse CSV files
docx -- Used to parse Docx files
```
The QuoteEngine module is made up of a number of files.
The `QuoteModel.py` file, which enables the creation of a Quote â€” taking the body and an author of a quote.
```python
new_quote = QuoteModel(row['body'].strip(' "'), row['author'].strip())
```
An `IngestorInterface.py` which defines the class and abstract methods importers should include, such as `parse`.
A variety of importer files, `CSVImporter.py`, `DocxImporter.py`, `PDFImporter.py` and `TXTImporter.py`. These inherit from the `IngestorInterface.py` and parse the related files. 
Finally, a `TextIngestor.py` file which checks a given document can be ingested by any of the previously mentioned importers.  
The QuoteEngine can be imported in the following way:
```python
from QuoteEngine import TextIngestor
```
It can then be used with a file and will return quotes from the file if successfully ingested, imported and parsed.
```python
quotes += TextIngestor.parse(file)
```

## MemeGenerator Module
The purpose of the MemeGenerator is to apply a given quote to a given image in a 'meme' style.
This module depends on a few packages such as:
```
pillow (PIL) -- Used to generate meme images
```
To use this module, the MemeGenerator can be imported and initialised with a directory path to save the memes at. For example:
```python
from MemeGenerator import MemeEngine

meme = MemeEngine('./static')
```
Then a meme can be generated by being passed a path to the image for the meme, a quote body and quote author. This then returns a path to the newly generated meme.
```python
path = meme.make_meme(img, quote.body, quote.author)
```
## App Entry Points
As mentioned above the app has two entry points, `app.py` and `meme.py`. `app.py` depends on some packages such as:
```
flask -- Used to create a web server and endpoints
requests -- Used to fetch an image from a given URL
```

### Requirements
To run the Meme Generator you will need Python 3.9 installed and you will need [XpdfReader](https://www.xpdfreader.com/pdftotext-man.html) installed. To install XpdfReader for your environment please follow the instructions found via the website. Installation varies slightly depending upon Linux, Mac or Windows. 

### Installation
It's recommended that this project is run using a virtual environment to ensure that all correct package versions are installed. To setup a virtual environment first install [`python3-venv`](https://docs.python.org/3/library/venv.html), installation method will vary depending on your device. 
Next, create a new virtual environment within the project `python3.9 -m venv .venv` and then activate it using `source .venv/bin/activate`.

To install the project there is a `requirements.txt` file in the root of the project which contains all of the relevant packages and corresponding versions.
To install from this file please navigate to the root level of the project and run: 
```
pip install -r requirements.txt
```

### Running the Web App
To run the Web App of the Meme Generator project, use: 
```
python3 app.py
``` 
This will start a web server on port 5000, and you can visit the web interface at [http://127.0.0.1:5000](http://127.0.0.1:5000).
Via the web interface you have a choice of two options, `generating a random meme` and `creating a meme`. The first action can be done by clicking `Random` and the second by clicking `Creator`. 
When clicking `Random` a random meme will be displayed, and by clicking `Creator` a form will be displayed which expects an image URL, quote body and quote author. Once these are submitted then the meme will be displayed. 

### Running the CLI App
To run the CLI App of the Meme Generator projects use:
```
python3 meme.py
```
The project takes three optional arguments:

- A string quote body `--body`
- A string quote author `--author`
- An image path `--path`

When running the project via the CLI the path to a generated meme image will be used. If no path is passed to the CLI then a random image will be used to create the meme.
Once the meme is generated a path to where it is located will be returned and printed to the CLI.

## Final Notes
This project also includes the package `pycodestyle` to ensure that the code adheres to Python PEP standards.
Files can be checked using the following, where the file name will need to be replaced with each Python file in the project:
```
pycodestyle app.py
```